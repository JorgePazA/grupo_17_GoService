<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/b16efeb3be.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="shortcut icon" href="/images/headIcon.ico">
    <script defer src="/js/userEditValidation.js"></script>
    <title>Edita tu perfil</title>
</head>
<body class="body-register">
    <%- include('./partials/header')%>
    <main class="main-register">
        <section class="registerform">
            <h2 class="title-register">Edita tu perfil</h2>

            <form class="form-container-register" method="post" enctype="multipart/form-data" action=<%="/userdetail/"+ user.id +"?_method=PUT"%> >

                <label for="name">Cambiar nombre</label>
                <input type="text" name="name" id="name" min="1" value= "<%= user.name %>" class= "form-control <%= locals.errors && errors.name ? 'is-invalid' : null %>"
                value="<%= locals.oldData ? oldData.name : null %>"
                />
                <p class="feedback">
                    <% if (locals.errors && errors.name) { %>
                        <div class= "text-danger">
                            <%= errors.name.msg  %> 
                        </div>
                       <% } %>
                </p>
                <label for="lastName">Cambiar apellido</label>
                <input value= "<%= user.lastName %>" name="lastName" id="lastName" class= "form-control <%= locals.errors && errors.lastName ? 'is-invalid' : null %>"
                />
                <p class="feedback">
                    <% if (locals.errors && errors.lastName) { %>
                        <div class= "text-danger">
                            <%= errors.lastName.msg  %> 
                        </div>
                       <% } %>
                </p>
                <label for="password">Modificar contraseña</label>
                <input type="password" name="password" id="password" min="1" class= "form-control <%= locals.errors && errors.password ? 'is-invalid' : null %>"
                />
                <p class="feedback">
                    <% if (locals.errors && errors.password) { %>
                        <div class= "text-danger">
                            <%= errors.password.msg  %> 
                        </div>
                       <% } %>
                </p>
                <label for="passwordVal">Confirmar contraseña</label>
                <input type="password" name="passwordVal"id="passwordVal" placeholder="Confirma tu contraseña" class= "form-control <%= locals.errors && errors.passwordVal ? 'is-invalid' : null %>" 
                />
                <p class="feedback">
                <% if (locals.errors && errors.passwordVal) { %>
                    <div class= "text-danger">
                        <%= errors.passwordVal.msg  %> 
                    </div>
                   <% } %>
                </p>
                
                <label for="image">Carga Nueva foto</label>
                <input type="file" name="avatar" id="avatar" class="inputfile">
                <button type="submit" class="form-btn-register">Modificar</button>
                <button type="reset" class="form-btn-register">Borrar</button>
            </form>
        </section>
    </main>
    <%- include('./partials/footer')%>
</body>
</html>